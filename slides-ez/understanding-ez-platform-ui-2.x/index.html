<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Understanding eZ Platform UI 2.x</title>

        <meta name="description" content="Understanding eZ Platform UI 2.x">
        <meta name="author" content="Damien Pobel">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

        <link href='https://fonts.googleapis.com/css?family=Maven+Pro:400,700' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/ez-2015.css" id="theme">

        <!-- Code syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- Printing and PDF exports -->
        <script>
            var link = document.createElement( 'link' );
            link.rel = 'stylesheet';
            link.type = 'text/css';
            link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
            document.getElementsByTagName( 'head' )[0].appendChild( link );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body class="ez">

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section id="front" class="ez-title-slide" data-background="assets/ibex.svg">
                    <div class="ez-overlay-box">
                        <h1 class="ez-slide-title">Understanding eZ Platform UI 2.x</h1>
                        <h2 class="ez-slide-sub-title">aka <strong>Hybrid Platform UI</strong></h2>
                    </div>

                    <ul class="ez-slide-meta">
                        <li>Damien Pobel</li>
                        <li>Lead Engineer UI</li>
                        <li><a href="https://twitter.com/dpobel">@dpobel</a></li>
                    </ul>
                    <ul class="ez-slide-meta">
                        <li>
                            This presentation is online:
                            <a href="http://j.mp/understanding-platform-ui-2">http://j.mp/understanding-platform-ui-2</a>
                        </li>
                   </ul>
                </section>

                <section id="journey-2-x">
                    <h1>Journey to version 2</h1>

                    <img src="assets/journey.gif" alt="Journey" class="main">

                    <ul>
                        <li class="fragment">from Platform UI 1.x</li>
                        <li class="fragment">to Hybrid Platform UI</li>
                    </ul>

                </section>

                <section id="platform-ui-1--1">
                    <h1>Platform UI 1.x?</h1>

                    <h2 class="fragment" data-fragment-index="1">Content part</h2>
                    <div class="cols">
                        <ul>
                            <li class="fragment">Viewing, editing Content, Dashboard, Trash, Search</li>
                            <li class="fragment">Single Page Application</li>
                            <li class="fragment">JavaScript! (~50k LOC w/o comments)</li>
                            <li class="fragment">YUI ‚ò†Ô∏è</li>
                            <li class="fragment">REST API based</li>
                            <li class="fragment">Rendered by the browser</li>
                        </ul>
                        <img src="assets/content.gif" alt="" class="fragment main" data-fragment-index="1" style="width: 40%;">
                    </div>
                </section>

                <section id="platform-ui-1--2">
                    <h1>Platform UI 1.x?</h1>

                    <h2>Admin part</h2>
                    <div class="cols">
                        <ul>
                            <li class="fragment">Admin panel: Section, Languages, Content Types, ...</li>
                            <li class="fragment">Mostly rendered server-side</li>
                            <li class="fragment">Re-injected into the SPA</li>
                            <li class="fragment">PJAX: <code>pushState</code> + AJAX</li>
                            <li class="fragment">PHP / Twig based</li>
                            <li class="fragment">JavaScript enhancements</li>
                        </ul>
                        <img src="assets/admin.gif" alt="Nerd Zone" class="main" style="width: 40%;">
                    </div>
                </section>

                <section id="lessons">
                    <h1>Lessons from 1.x</h1>

                    <img src="assets/learn.gif" alt="Learn" class="main" style="height: 80%;">
                </section>

                <section id="lesson--1">
                    <h1>#1: You don't like JavaScript ;-)</h1>

                    <div class="cols" style="height: 50%;">
                        <img src="assets/hate.gif" alt="Hate" class="main" style="height: 100%;">
                        <img src="assets/troll.gif" alt="Troll" class="main fragment" style="height: 100%;">
                    </div>
                    <ul>
                        <li class="fragment"><code>&lt;/troll&gt;</code></li>
                        <li class="fragment">Underestimated effort to adopt the SPA structure</li>
                    </ul>
                </section>

                <section id="lesson--2" data-ez-slow>
                    <h1>#2: <strike>Slow</strike> Unoptimized</h1>

                    <div class="cols" style="height: 80%;">
                        <video data-src="assets/loader.mp4" data-autoplay loop class="main fragment" style="width: 50%;"></video>
                        <img src="assets/turtle.gif" alt="Unoptimized" class="main fragment" style="height: 100%; width: auto;">
                    </div>
                </section>

                <section id="lesson--3">
                    <h1>#3: Frameworks die</h1>

                    <img src="assets/yui.gif" alt="Time to die" class="main" style="height: 70%;">
                </section>

                <section id="lesson--4">
                    <h1>#4: Do not Repeat Yourself</h1>

                    <ul>
                        <li class="fragment">JavaScript app in the PHP app</li>
                        <li class="fragment">JavaScript app <strong>next to</strong> the PHP app</li>
                        <li class="fragment">Duplicated features: display a Content, edit form, ...</li>
                    </ul>

                    <img src="assets/twins.gif" alt="Twins" class="main fragment">
                </section>

                <section id="lesson--5">
                    <h1>#5: Extensibility</h1>

                    <ul>
                        <li class="fragment">JavaScript code: very extensible</li>
                        <li class="fragment">Lack of specialization</li>
                        <li class="fragment">Requires simplification</li>
                    </ul>
                    <img src="assets/yes-no.gif" alt="Yes but no" class="main fragment">
                </section>

                <section id="lessons-positive">
                    <h1>Positive parts</h1>

                    <div class="cols" style="height:80%;">
                        <ul>
                            <li class="fragment">Component based before it becomes mainstream</li>
                            <li class="fragment">Relatively few bugs</li>
                            <li class="fragment">Universal Discovery Widget</li>
                            <li class="fragment">Online Editor (ok it lacks some features)</li>
                            <li class="fragment">...</li>
                        </ul>
                        <img src="assets/high-two.gif" alt="Positive parts" class="main">
                    </div>
                </section>

                <section id="hybrid">
                    <h1>Platform UI Bundle 2.x</h1>

                    <ul>
                        <li class="fragment" data-fragment-index="1">üéâ Platform UI Bundle 2.x is the new legacy! üéâ</li>
                        <li class="fragment" data-fragment-index="2">Reuse components: Subitems, UDW, PJAX...</li>
                        <li class="fragment" data-fragment-index="3">Eventually get rid of it</li>
                    </ul>

                    <img src="assets/legacy.gif" alt="Legacy!" class="main fragment" data-fragment-index="3">
                </section>

                <section id="hybrid-what">
                    <h1>Hybrid Platform UI?</h1>

                    <ul>
                        <li class="fragment" data-fragment-index="1">New set of packages providing the admin</li>
                        <li class="fragment" data-fragment-index="2"><em>Hybrid</em>?</li>
                    </ul>
                    <img src="assets/hybrid.gif" alt="Hybrid" class="main fragment" style="height: 40%;" data-fragment-index="2">
                    <ul>
                        <li class="fragment">Server driven + JavaScript Enhancements</li>
                        <li class="fragment">Back in an <em>admin</em> siteaccess</li>
                    </ul>

                </section>

                <section id="hybrid-fast">
                    <h1>Performances?</h1>

                    <ul>
                        <li>Fast by default</li>
                        <li>Still optimizable</li>
                    </ul>

                    <img src="assets/fast.gif" alt="Fast!" class="main">
                </section>

                <section id="hybrid-fast-how">
                    <h1>How does it work?</h1>

                    <img src="assets/how.gif" alt="How?" class="main">
                    <ol>
                        <li class="fragment">Full page generated with PHP / Symfony / Twig</li>
                        <li class="fragment">
                            Once in app, enhanced navigation to get a JSON update structure
                            <br>
                            (Unless a specific class is set on the link/form or one of its ancestor)
                        </li>
                    </ul>
                </section>

                <section id="hybrid-fast-how-2">
                    <h1>JSON Update structure ?</h1>

                    <pre><code>{
  "selector": "ez-platform-ui-app",
  "update": {
    "properties": {"pageTitle": "Dashboard"},
    "children": [
      {
        "selector": "#discovery",
        "update": {"properties": {"visible": false}}
      },
      {
        "selector": "ez-navigation-hub",
        "update": {"attributes": {"active-zone": "", "matched-link-url": ""}}
      },
      {
        "selector": "main",
        "update": "&lt;ez-dashboard&gt;&lt;h1&gt;Dashboard&lt;\/h1&gt;&lt;\/ez-dashboard&gt;"
      }
    ]
  }
}</code></pre>
                </section>

                <section id="js-framework">
                    <h1>Framework?</h1>

                    <img src="assets/nope.gif" alt="Nope" class="main">
                    <ul>
                        <li class="fragment">#UseThePlatform + libraries</li>
                        <li class="fragment">Custom Elements (aka Web Components) with Polymer v2</li>
                    </ul>
                </section>

                <section id="custom-elements">
                    <h1>Web Components? Custom Elements?</h1>

                    <ul>
                        <li class="fragment" data-fragment-index="1">Register new HTML tag: <code>&lt;ez-subitem&gt;</code>, <code>&lt;ez-online-editor&gt;</code>...</li>
                        <li class="fragment" data-fragment-index="2">Declaratively configure a behavior: server generated code drives the browser</li>
                        <li class="fragment" data-fragment-index="3">Also allow to sandbox and reuse YUI based components</li>
                    </ul>
                    <img src="assets/box.gif" alt="Box" class="main fragment" data-fragment-index="3">
                </section>

                <section id="extensibility--1">
                    <h1>Extensibility?</h1>

                    <h2>Server-side extension points</h2>
                    <div class="cols" style="height: 70%;">
                        <ul>
                            <li class="fragment">Template override</li>
                            <li class="fragment">Zone in the Navigation Hub</li>
                            <li class="fragment">Link in a zone of the Navigation Hub</li>
                            <li class="fragment">WIP: Design</li>
                            <li class="fragment">...</li>
                        </ul>
                        <img src="assets/serverside.gif" alt="Dark side" class="main">
                    </div>
                </section>

                <section id="extensibility--2">
                    <h1>Extensibility?</h1>

                    <h2>Frontend side extension points</h2>
                    <div class="cols" style="height: 70%;">
                        <ul>
                            <li class="fragment">TBD: way to inject custom CSS / custom JS / HTML Import</li>
                            <li class="fragment">
                                App dispatches a DOM event after each update
                                <br>
                                Allows to boot up JavaScript enhancements
                            </li>
                        </ul>
                        <img src="assets/deco.gif" alt="Decoration" class="main">
                    </div>
                </section>

                <section id="extensibility--3">
                    <h1>Extensibility?</h1>

                    <h2>One last thing on extensibility</h2>
                    <ul>
                        <li class="fragment" data-fragment-index="1">Admin panel (PJAX) is integrated</li>
                        <li class="fragment" data-fragment-index="2">Your own PJAX extensions can <em>easily</em> be integrated!</li>
                    </ul>

                    <div class="cols" style="height: 50%;">
                        <div class="sidebyside">
                            <img src="assets/yeah.gif" alt="Yeah!" class="main fragment" data-fragment-index="2" style="height: 100%;">
                        </div>
                        <div class="sidebyside">
                            <img src="assets/believe.gif" alt="" class="main fragment" style="height: 100%;">
                        </div>
                    </div>
                </section>

                <section id="smile-ez-ui-cron-bundle">
                    <h1>Examples #1: smile/ez-uicron-bundle</h1>

                    <img src="assets/easy.gif" alt="Easy" class="main" style="height: 40%;">
                    <h2 class="fragment"><a href="https://github.com/Smile-SA/EzUICronBundle/pull/1/files">Diff</a>: 19 additions and 8 deletions</h2>
                    <ul class="fragment">
                        <li>Make YML files valid for Symfony 3.x</li>
                        <li>Change URL to start with <code>/pjax</code></li>
                        <li>Add a link the admin panel (<a href="https://github.com/ezsystems/hybrid-platform-ui/blob/master/docs/howto/add_navigation_hub_items.md">documentation</a>)</li>
                    </ul>
                </section>

                <section id="netgen-tagsbundle">
                    <h1>Examples #2: netgen/tagsbundle</h1>

                    <h2><a href="https://github.com/netgen/TagsBundle/pull/57/files">Diff</a>: 32 additions and 8 deletions</h2>
                    <div class="cols">
                        <ul class="fragment">
                            <li>Same as for previous example</li>
                            <li>Added a new zone</li>
                            <li>Change an Event Listener to properly detect Hybrid Platform UI request</li>
                            <li>Apply (some) JavaScript enhancements</li>
                        </ul>
                        <img src="assets/do-it.gif" alt="Do it!" class="main fragment">
                </section>

                <section id="questions">
                    <h1>Question?</h1>

                    <div class="cols" style="height: 70%;">
                        <img src="assets/question.gif" alt="Question" class="main" style="height: 80%;">
                        <img src="assets/trick-question.gif" alt="Question" class="fragment main" style="height: 80%;">
                    </div>
                </section>

                <section id="install-links">
                    <h1>Install, links, ...</h1>

                    <h2>Code</h2>
                    <ul>
                        <li><a href="https://github.com/ezsystems/ezplatform/pull/177">Hybrid UI integration PR on ezsystems/ezplatform</a></li>
                        <li><a href="https://github.com/ezsystems/hybrid-platform-ui">ezsystems/hybrid-platform-ui</a></li>
                        <li><a href="https://github.com/ezsystems/hybrid-platform-ui-core-components">ezsystems/hybrid-platform-ui-core-components</a></li>
                    </ul>
                    <h2>Install</h2>
                    <ul>
                        <li><code>$ composer install</code></li>
                        <li><code>$ php bin/console ezplatform:install clean</code></li>
                        <li>Go to http://host/admin</li>
                    </ul>
                </section>

            </div>
        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.js"></script>

        <script>

            // Full list of configuration options available at:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,
                center: false,
                slideNumber: 'c/t',

                transition: 'slide', // none/fade/slide/convex/concave/zoom

                width: '100%',
                height: '100%',
                margin: 0,

                // Optional reveal.js plugins
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true },
                    { src: 'plugin/notes/notes.js', async: true }
                ]
            });

            Reveal.addEventListener('slidechanged', function(event) {
                var currentSlide = event.currentSlide;

                if ( currentSlide.hasAttribute('data-ez-slow') ) {
                    currentSlide.classList.add('slow');
                    setTimeout(function () {
                        currentSlide.classList.remove('slow');
                        Reveal.nextFragment();
                    }, 5000);
                }
            });

        </script>

    </body>
</html>
